<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Numerator Game</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
<link rel="icon" href="favicon.png" type="image/x-icon">
</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
        
        <!-- Main Menu -->
        <div id="mainMenu" class="menu">
            <h1>NUMERATOR</h1>
            <div>
                <button onclick="startGame()">Start Game</button>
                <button onclick="showInstructions()">How to Play</button>
                <button onclick="showRankings()">Highest Numerators</button>
                <button onclick="showSettings()">Settings</button>
            </div>
        </div>
        
        <!-- Instructions -->
        <div id="instructionsMenu" class="menu hidden">
            <h2>How to Play</h2>
            <div style="text-align: left; max-width: 600px; margin: 0 auto;">
                <p><strong>Controls:</strong></p>
                <ul>
                    <li>Move Left/Right: A/D keys or Left/Right arrows or click Left/Right of screen</li>
                    <li>Jump: W key, Up arrow, or click Middle of screen</li>
                </ul>
                <p><strong>Gameplay:</strong></p>
                <ul>
                    <li>Collect +N numbers to increase your score</li>
                    <li>Avoid -N numbers that will attack when close</li>
                    <li>Collect *N numbers to multiply your score</li>
                    <li>Jump over /N division lines to avoid them</li>
                    <li>Your speed increases as your number grows</li>
                    <li>Don't let your score go below 0!</li>
                </ul>
            </div>
            <button onclick="showMainMenu()">Back to Menu</button>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameOverMenu" class="menu game-over hidden">
            <h2 id="gameOverTitle">GAME OVER</h2>
            <p id="finalScore">Final Score: 0</p>
            <p id="highestScore">Highest This Run: 0</p>
            <p id="soaringQuote" style="font-style: italic; margin: 20px 0; color: #ccc; max-width: 400px;">The higher you soar, the greater the fall.</p>
            <div>
                <button onclick="startGame()">Play Again</button>
                <button onclick="showMainMenu()">Main Menu</button>
            </div>
        </div>
        
        <!-- HUD -->
        <div id="hud" class="hud hidden">
            <div>Score: <span id="score">0</span></div>
            <div>Speed: <span id="speed">1.0</span></div>
        </div>
        
        <!-- In-game Instructions -->
        <div id="gameInstructions" class="instructions hidden">
            <div>A/D or ←/→: Move | W/↑/Click: Jump | ESC: Menu</div>
        </div>
        
        <!-- Settings Menu -->
        <div id="settingsMenu" class="menu hidden">
            <h2>Settings</h2>
            <div style="text-align: left; max-width: 400px; margin: 0 auto;">
                <div style="margin: 20px 0;">
                    <label>Max speed: <span id="maxSpeedValue">5</span></label>
                           <!-- oninput="updateMaxSpeed(this.value)" onchange="saveSettings()" -->
                    <input type="range" id="maxSpeedSlider" min="1" max="10" step="1" value="6" 
                           oninput="updateMaxSpeed(this.value)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Max multiplier: <span id="maxMultiplierValue">4</span></label>
                           <!-- oninput="updateMaxMultiplier(this.value)" onchange="saveSettings()" -->
                    <input type="range" id="maxMultiplierSlider" min="2" max="20" step="1" value="4" 
                           oninput="updateMaxMultiplier(this.value)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Max divisor: <span id="maxDivisorValue">8</span></label>
                           <!-- oninput="updateMaxDivisor(this.value)" onchange="saveSettings()" -->
                    <input type="range" id="maxDivisorSlider" min="2" max="20" step="1" value="8" 
                           oninput="updateMaxDivisor(this.value)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Spawns per frame: <span id="spawnsPerFrameValue">0.2</span></label>
                    <input type="range" id="spawnsPerFrameSlider" min="0.05" max="2" step="0.05" value="0.2" 
                           oninput="updateSpawnsPerFrame(this.value)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <!-- Checkbox for scaling jumps to speed -->
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="scaleJumpCheckbox" 
                               onchange="toggleScaleJump()" unchecked>
                        Scale jump height to speed
                    </label>
                </div>
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="multiplierGuardsCheckbox" 
                               onchange="toggleMultiplierGuards()" checked>
                        Multipliers are guarded by subtractors
                    </label>
                </div>
                <!-- Options to change relative probabilities of the four game objects to spawn -->
                <div style="margin: 20px 0;">
                    <label>Adder frequency: <span id="adderFrequencyValue">3</span></label>
                    <input type="range" id="adderFrequencySlider" min="1" max="80" step="1" value="40" 
                           oninput="updateSpawn(this.value, this.id)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Subtractor frequency: <span id="subtractorFrequencyValue">3</span></label>
                    <input type="range" id="subtractorFrequencySlider" min="0" max="80" step="1" value="30" 
                           oninput="updateSpawn(this.value, this.id)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Multiplier frequency: <span id="multiplierFrequencyValue">3</span></label>
                    <input type="range" id="multiplierFrequencySlider" min="0" max="80" step="1" value="1" 
                           oninput="updateSpawn(this.value, this.id)"
                           style="width: 100%; margin-top: 5px;">
                </div>
                <div style="margin: 20px 0;">
                    <label>Divisor frequency: <span id="divisorFrequencyValue">3</span></label>
                    <input type="range" id="divisorFrequencySlider" min="0" max="80" step="1" value="2" 
                           oninput="updateSpawn(this.value, this.id)" 
                           style="width: 100%; margin-top: 5px;">
                </div>
            </div>
            <button onclick="resetDefaults()">Reset Defaults</button>
            <button onclick="showMainMenu()">Back to Menu</button>
        </div>
        
        <!-- Rankings Menu -->
        <div id="rankingsMenu" class="menu hidden">
            <h2>Highest Numerators</h2>
            <div style="max-width: 500px; margin: 0 auto;">
                <table style="width: 100%; color: white; border-collapse: collapse; margin: 20px 0;">
                    <thead>
                        <tr style="border-bottom: 2px solid #666;">
                            <th style="padding: 10px; text-align: center;">Rank</th>
                            <th style="padding: 10px; text-align: center;">Score</th>
                            <th style="padding: 10px; text-align: center;">Time</th>
                        </tr>
                    </thead>
                    <tbody id="rankingsTableBody">
                        <tr>
                            <td style="padding: 8px;">1.</td>
                            <td style="padding: 8px;">0</td>
                            <td style="padding: 8px;">0:00</td>
                        </tr>
                    </tbody>
                </table>
                <div style="margin: 20px 0;">
                    <label>
                        <input type="checkbox" id="defaultHighScoresCheckbox" 
                               onchange="toggleDefaultHighScores()" checked>
                        Runs with default settings only
                    </label>
                </div>
            </div>
            <button onclick="resetHighScores()">Reset Scores</button>
            <button onclick="showMainMenu()">Back</button>
        </div>
    </div>
    
    <script src="game.js"></script>
</body>
</html>
